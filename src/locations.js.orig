'use strict'
var querystring = require('querystring'),
<<<<<<< HEAD
	URL = require('url'),
	sendRequest = require('./common/send-request')
=======
  URL = require('url'),
  helper = require('./common/response-handlers'),
  // _cameras = require('./objects/cameras'),
  sendRequest = require('./common/send-request')
>>>>>>> fix some styling and test browser version

var locationsUrl = function(host) {
  return URL.resolve(host, 'locations/')
}

var _find = function(params) {
  var url = locationsUrl(this.host),
    options = { 
      method: 'GET', 
      headers: { 'content-type': 'application/json'},
    }

  if (params) {
    url = URL.resolve(url, params)
  }

  return sendRequest(this, url, options)
}

var _tree = function(orgPath, depth) {
  var url = locationsUrl(this.host),
    options = { 
      method: 'GET', 
      headers: { 'content-type': 'application/json'},
    }
    
  url = URL.resolve(url, 'tree/' + orgPath)

  if(typeof depth !== 'undefined') {
    url = URL.resolve(url, '?depth=' + depth)
  }

  return sendRequest(this, url, options)    
}

var _cameras = function (params) {
<<<<<<< HEAD
	return require('./extensions/cameras')(this, params)
=======
  return require('./objects/cameras')(this, params)
>>>>>>> fix some styling and test browser version
}

module.exports = function(connection) {
  return {
    find: _find.bind(connection),
    tree: _tree.bind(connection),
    cameras: _cameras.bind(connection)
  }
};